if Object.const_defined?('ActiveRecord')
  ActiveRecord::Base.logger = Logger.new(STDOUT)
end
# User.logger = Logger.new(STDOUT)
# User.logger.level = 0

def rails_server!(port = 3000)
  Rack::Handler::WEBrick.shutdown rescue nil
  Thread.new {
    Rack::Handler::WEBrick.run(Rack::Builder.parse_file('config.ru')[0], :Port => port) rescue p($!)
  } if port
end
